<!DOCTYPE html>
<html>

<head>
    <title>Cyborg Room Automation</title>
    <link rel="stylesheet" type="text/css" href="css/style.css">

    <script src="js/jquery.min.js"></script>

    <script>
	
        $(document).ready(function() {
            setInterval("get_digital_output_status()", 100);
        });

		
		
        function get_digital_output_status() { var someUrl = "/digital_outputs";
            $.ajax({url: someUrl,dataType: "json",success: function(response) {
                    if (response.digital_outputs["dout1"] == 1)
                        $("#dout1").html("HIGH")
                    else
                        $("#dout1").html("LOW")
                    if (response.digital_outputs["dout2"] == 1)
                        $("#dout2").html("HIGH")
                    else
                        $("#dout2").html("LOW")
                    if (response.digital_outputs["dout3"] == 1)
                        $("#dout3").html("HIGH")
                    else
                        $("#dout3").html("LOW")
                    if (response.digital_outputs["dout4"] == 1)
                        $("#dout4").html("HIGH")
                    else
                        $("#dout4").html("LOW")
		    if (response.digital_outputs["dout5"] == 1)
                        $("#dout5").html("HIGH")
                    else
                        $("#dout5").html("LOW")
                    if (response.digital_outputs["dout6"] == 1)
                        $("#dout6").html("HIGH")
                    else
                        $("#dout6").html("LOW")
                    if (response.digital_outputs["dout7"] == 1)
                        $("#dout7").html("HIGH")
                    else
                        $("#dout7").html("LOW")
                    if (response.digital_outputs["dout8"] == 1)
                        $("#dout8").html("HIGH")
                    else
                        $("#dout8").html("LOW")}})}



        function digital_output_toggle(pinToToggle) {var someUrl = "/digital_outputs/toggle?pin=" + pinToToggle;
            $.ajax({url: someUrl,dataType: "text", success: function(response) {
                    if (response == '1') {
                        $('#' + pinToToggle).html("HIGH");
                    } else if (response == '0') {
                        $('#' + pinToToggle).html("LOW");
                    } else {
                        alert("failed to toggle digital output")
                    }}})}
	
    </script>

    <script>
        $(document).ready(function() {
            setInterval("getTemperature()", 5000);
        });
		
		
        function getTemperature() {
            var someUrl = "/analog_inputs";
            $.ajax({ url:someUrl,dataType:"text",success: function(response) {$("#temp").html(response + "&#8451;");}})}
	</script>



</head>

<body>
    <section>
        <table>
            <tr>
                <th>Digital Ouput</th>
                <th>Status</th>
                <th>Option</th>
            </tr>
            <tr>
                <td>DOut1</td>
                <td id="dout1">waiting..</td>
                <td>
                    <button class="button" onclick="digital_output_toggle('dout1')">Toggle</button>
                </td>
            </tr>
            <tr>
                <td>DOut2</td>
                <td id="dout2">waiting..</td>
                <td>
                    <button class="button" onclick="digital_output_toggle('dout2')">Toggle</button>
            </tr>
            <tr>
                <td>DOut3</td>
                <td id="dout3">waiting..</td>
                <td>
                    <button class="button" onclick="digital_output_toggle('dout3')">Toggle</button>
            </tr>
	    <tr>
                <td>DOut4</td>
                <td id="dout4">waiting..</td>
                <td>
                    <button class="button" onclick="digital_output_toggle('dout4')">Toggle</button>
                </td>
            </tr>
	    <tr>
                <td>DOut5</td>
                <td id="dout5">waiting..</td>
                <td>
                    <button class="button" onclick="digital_output_toggle('dout5')">Toggle</button>
                </td>
            </tr>
            <tr>
                <td>DOut6</td>
                <td id="dout6">waiting..</td>
                <td>
                    <button class="button" onclick="digital_output_toggle('dout6')">Toggle</button>
                </td>
            </tr>
            <tr>
                <td>DOut7</td>
                <td id="dout7">waiting..</td>
                <td>
                    <button class="button" onclick="digital_output_toggle('dout7')">Toggle</button>
                </td>
            </tr>
            <tr>
                <td>DOut8</td>
                <td id="dout8">waiting..</td>
                <td>
                    <button class="button" onclick="digital_output_toggle('dout8')">Toggle</button>
                </td>
            </tr>
            <tr>
                <td>DOut9</td>
                <td id="temp">waiting..</td>
            </tr>
        </table>
    </section>

</body>

</html>
